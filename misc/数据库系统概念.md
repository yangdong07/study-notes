

## 数据库系统概念

## 第一章 引言

- 数据库管理系统（DBMS)，目标： 提供一种方便、高效的存取数据库信息的途径
- 数据视图：数据抽象分层
    - 物理层：数据如何存储，格式，字节，编码，压缩，等等
    - 逻辑层：数据库中存储什么数据，数据间存在什么关系。 这两层主要由开发人员设计
    - 视图层：只描述整个数据库的某个部分
- 实例（instance）：特定时刻存储在数据库中的信息的集合
- 模式（schema）：数据库的总体设计（数据结构等等）
- 数据模型（data model）： 描述数据、数据联系、数据语义以及一致性约束的概念工具的集合。
    - 关系模型（relational model）：表（table），最常用的数据模型
    - 实体-联系模型（entity-relationship model）： E-R数据模型
    - 基于对象的数据模型（object-based data model）
    - 半结构化数据模型（semistructured data model)：例如 XML


### 数据库语言

面向使用者的数据库语言，应用者了解基本概念，基本用法。

- 数据定义语言（data-definition language）：DDL， 定义数据库模式（schema）
- 数据操纵语言（data-manipulation language）：DML，表达数据库的查询和更新。增删改查
    - 过程化DML， 用户指定需要什么数据以及**如何**获取这些数据
    - 声明式DML， 只要求用户指定需要什么数据，而不指明如何获得这些数据。
- 查询（query）语言， QL， DML中涉及信息检索的部分。
- DDL，一致性约束
    - 域约束（domain constraint）： 取值范围，例如整数、字符、日期、时间
    - 参照完整性（referential integrity）： 引用的值必须存在。
    - 断言（assertion）：数据库需要时刻满足某一个条件。
    - 授权（authorization）：访问权限。


### 数据库设计

在具体的应用中，选择一种数据模型，并使用相应的数据库系统，设计

- 设计过程
    1. 概念设计：选择一个数据模型，并运用该选定的数据模型的概念，将那些需求准换成一个数据库的概念模式。从关系模型角度来看，概念设计阶段涉及决定数据库中应该包括哪些属性，以及如何将这些属性组织到多个表中。
    2. 功能需求说明：用户描述数据之上的各种操作（事务）
    3. 逻辑设计阶段：高层的概念模式映射到要使用的数据库系统的实现数据模型上
    4. 物理设计阶段：数据库物理特性，包括文件组织形式以及内部存储结构。

- 统一建模语言（Unified Modeling Language，UML）


### 数据库体系结构

- 数据库系统由几个子系统构成：
    - 存储管理器： 在数据库中存储的底层数据与应用程序和向系统提交的查询之间提供接口
    - 查询处理器（query processor）： 编译和执行DDL 和DML语句

- 事务管理（transaction management）：负责保证不管是否有故障发生，数据库都要处于一致的（正确的）状态。
    - 恢复管理器
    - 并发控制管理器
    - 事务管理器

- 数据库体系结构
    - 两层体系结构：  客户-应用  -------  数据库系统， 客户端应用直接远程访问数据库，数据调用。
    - 三层体系结构：  客户-应用程序（前端） ------  应用服务器 - 数据库系统， 比较常见。

## 第一部分： 关系数据库

主要介绍 关系模型，和 SQL。

## 第二章 关系模型介绍

- 表（table）/ 关系 （relation）： 表的一行表示一组值之间的一种联系，一个表就是这种联系的一个集合。 table 概念在数学上和 relation 是密切相关的。
- 元组（tuple）： 行
- 属性（attribute）： 列
- 关系实例（relation instance）： 表示一个关系（表）的特定实例，也就是所包含的一组特定的行。
- 域：关系的每个属性的取值范围（集合）
- 原子域：取值不可分割。 例如不能是列表。一个人的某个属性是A和B，其属性写成 [A, B]，就不是原子域
- 空值（null）

### 数据库模式

- 数据库模式（database schema）： 数据库的逻辑设计
- 数据库实例（database instance）： 给定时刻数据库中数据的一个快照
- 关系（relation） --- 程序设计语言中 变量的概念；
- 关系模式（relation schema）--- 类型定义的概念。 好理解，数据库模式就是定义数据结构、约束等等。
- 关系实例（relation instance） --- 变量的值。

### 码（key？？），键

- 一个关系中没有两个元组在所有属性上的取值都相同： 不允许出现两条完全一模一样的记录。
- 超键（superkey）： 是**一个或多个属性的集合**，这些属性的组合可以使我们在一个关系中唯一的确定一个元组。
- 候选键（candidate key）： 超键的任意真子集都不能成为超键，这样的最小超键称为候选键。比如 {A, B} 是超键，但是只凭 {A} 或 {B} 不可以唯一确定一个元组（分开来允许重复），则 {A, B}就是一个候选键。
- 主键（primary key）： 有设计者决定，用于区分不同元组的候选键。
- 外键（foreign key）： 一个关系模式（r1）的一个属性是另一个关系模式（r2）的主键， 则这个属性在 r1 上称做参照 r2 的外键。
- 参照关系（referencing relation）： r1 也称为外键依赖的参照关系。
- 被参照关系（referenced relation）： r2 称为外键的被参照关系。
- 参照完整性约束：要求参照关系中的任意元组在特定属性上的取值必然等于被参照关系某个元组在特定属性上的取值： 也就是说，这个值必须在被参照关系中存在。


### 其他

- 模式图（schema diagram）：数据库中模式的图形化表示，它显示了数据库中的关系，关系的属性、主码和外码。
- 关系查询语言（relational query language）
- 关系代数（relational algebra）
- 关系运算
    - select，选择（筛选）： 返回输入关系中满足谓词的行
    - projection，投影： 对输入关系的所有行输出指定的属性
    - 自然连接： join操作，在某个属性上值相同的元组连接在一起
    - 笛卡尔积： `[1, 2] x [3, 4] = [(1, 3), (1, 4), (2, 3), (2, 4)]`
    - 并： 输出两个输入关系中元组的并。
